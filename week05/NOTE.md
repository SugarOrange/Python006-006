学习笔记
作业三：请用自己的语言描述如下问题： Q:

在你目前的工作场景中，哪个业务适合使用 rabbitmq？ 引入 rabbitmq 主要解决什么问题?（非相关工作可以以设计淘宝购物和结账功能为例来描述）
如何避免消息重复投递或重复消费？
交换机 fanout、direct、topic 有什么区别？
架构中引入消息队列是否利大于弊？你认为消息队列有哪些缺点？
A:

1. 在你目前的工作场景中，哪个业务适合使用 rabbitmq？
以工作为例：
    处理企业客户批量登录行为(一种登录方式，可直接理解为某种情况下，几千个终端5秒内同时登录)，可使用消息队列；由于当前生产环境未采用消息队列
    连接的处理请求，会直接打到后端mysql上，造成短时间内mysql连接数激增。
    目前认知来看，可以新增消息队列，后续可依靠消息队列的路由，进行数据库的水平扩展，均摊峰值
以淘宝购物和结账功能为例子：
    消息队列，可实现 结账的金额扣除 与 订单生成 的异步操作，各干各的，互不耽误(没必要等待结账彻底完成后，再执行后续操作)。
    如果金额扣除出现问题，在通过其他方式来取消订单以及后续动作即可

2.如何避免消息重复投递或重复消费？
    当一个消费者成功消费数据后，主动返回一个ack信号，消息队列清除已消费的数据

3.交换机 fanout、direct、topic 有什么区别？
fanout：多个channel，各channel数据一致。目前看，可用作多路多活，提高冗余
direct：单独一个channel
topic：多路多策略，数据发送至匹配的channel。目前看，可用作 写分片

4. 架构中引入消息队列是否利大于弊？你认为消息队列有哪些缺点？
利大于弊
优点：可以依托消息队列实现 多活、分摊IO或计算压力、异步、数据额外冗余、错开峰值等
缺点：业务的整体结构会更复杂，维护成本提高。
     业务响应时间，可能会被拖慢(依据业务而定)
     并没能真正解决业务峰值打到后端数据库问题，感觉算是一种"妥协"方案
作业 3 提示：
（1）服务间异步通信
（2）顺序消费
（3）定时任务
（4）流量削峰
（5）解耦
（6）利用消息队列将高并发访问变为串行操作
（7）异步下单
（8）消息队列持久化

